<div class="ui container" ng-app="nexteniac-viewclass" ng-controller="MainController" ng-init="initViewClass()" ng-cloak>
	<br>
	<div class="ui secondary center aligned segment" ng-hide="classexists">
		<h2>
			<i class="frown icon"></i>
			"{{classname}}" could not be found!
		</h2>
		<b><a href="/classes"><i class="left arrow icon"></i> All Classes</a></b>
	</div>
	<div class="ui grid" ng-show="classexists">
		<div class="twelve wide column">
			<div class="ui inverted center aligned segment headerSegment" ng-class="{'teal': !phantommode, 'pink': phantommode}">
				<h1 style="text-transform: uppercase; font-family: 'Oswald' !important; font-weight: 700 !important; letter-spacing: 1px;">{[class.name]}</h1>
			</div>
		</div>
		<div class="two wide column">
			<div class="ui inverted center aligned segment headerSegment" ng-click="togglePhantomMode()" ng-class="{'teal': !phantommode, 'pink': phantommode}">
				<h1>
					<i class="x icon" ng-show="phantommode"></i>
					<i class="gamepad icon" ng-hide="phantommode"></i>
				</h1>
			</div>
		</div>
		<div class="two wide column">
			<div class="ui inverted center aligned segment headerSegment" ng-click="toggleEditMode()" ng-class="{'teal': !phantommode, 'pink': phantommode}">
				<h1>
					<i class="lock icon" ng-show="editmode"></i>
					<i class="unlock icon" ng-hide="editmode"></i>
				</h1>
			</div>
		</div>
		<div class="twelve wide column">
			<div class="ui six item labeled icon menu">
				<a class="item" ng-class="{'active': tab === 1, 'teal': !phantommode, 'pink': phantommode}" ng-click="changeTab(1)">
					<i class="table icon"></i>
					Grades
				</a>
				<a class="item" ng-class="{'active': tab === 2, 'teal': !phantommode, 'pink': phantommode}" ng-click="changeTab(2)">
					<i class="chart area icon"></i>
					Category Stats
				</a>
				<a class="item" ng-class="{'active': tab === 3, 'teal': !phantommode, 'pink': phantommode}" ng-click="changeTab(3)">
					<i class="chart line icon"></i>
					MP Stats
				</a>
				<a class="item" ng-class="{'active': tab === 4, 'teal': !phantommode, 'pink': phantommode}" ng-click="changeTab(4)">
					<i class="chart pie icon"></i>
					Average Stats
				</a>
				<a class="item" ng-class="{'active': tab === 5, 'teal': !phantommode, 'pink': phantommode}" ng-click="changeTab(5)">
					<i class="lightbulb icon"></i>
					Insights
				</a>
				<a class="item" ng-class="{'active': tab === 6, 'teal': !phantommode, 'pink': phantommode}" ng-click="changeTab(6)">
					<i class="wrench icon"></i>
					Tools
				</a>
			</div>
			<div id="viewClassTabs">
				<div class="tab" ng-show="tab === 1">
					<div class="ui form">
						<table class="ui compact center aligned table" ng-hide="mpGrades[search.mp-1].length === 0">
							<thead id="viewClassGradesHeader">
								<th ng-click="sortGrades(1)">Date <i class="caret icon" ng-show="sort.field === 1" ng-class="{'down': sort.dir === -1, 'up': sort.dir === 1}"></i></th>
								<th ng-hide="editmode" ng-click="sortGrades(2)">Letter <i class="caret icon" ng-show="sort.field === 2" ng-class="{'down': sort.dir === -1, 'up': sort.dir === 1}"></i></th>
								<th ng-click="sortGrades(3)"><span ng-hide="editmode">Percent</span><span ng-show="editmode">Points Earned</span> <i class="caret icon" ng-show="sort.field === 3" ng-class="{'down': sort.dir === -1, 'up': sort.dir === 1}"></i></th>
								<th ng-click="sortGrades(4)">Points <span ng-show="editmode">Total</span> <i class="caret icon" ng-show="sort.field === 4" ng-class="{'down': sort.dir === -1, 'up': sort.dir === 1}"></i></th>
								<th ng-click="sortGrades(5)">Category <i class="caret icon" ng-show="sort.field === 5" ng-class="{'down': sort.dir === -1, 'up': sort.dir === 1}"></i></th>
								<th ng-click="sortGrades(6)">Assignment Name <i class="caret icon" ng-show="sort.field === 6" ng-class="{'down': sort.dir === -1, 'up': sort.dir === 1}"></i></th>
								<th ng-show="editmode"></th>
								<th ng-show="phantommode"></th>
							</thead>
							<tbody>
								<tr ng-repeat="grade in mpGrades[search.mp-1]" ng-show="grade.mp === search.mp" ng-class="{'gradeshown': grade.mp === search.mp, 'error': mpGrades[search.mp-1][$index].deleted}">
									<td>
										<span ng-hide="editmode">{[grade.date | date:'EEE M/d/yy']}</span>
										<div class="ui small input" ng-show="editmode" ng-class="{'disabled': mpGrades[search.mp-1][$index].deleted}">
											<input type="date" ng-model="mpGrades[search.mp-1][$index].date" />
										</div>
									</td>
									<td ng-hide="editmode">
										<h2 class="ui center aligned header">
											{[grade.ptsearned / grade.ptstotal | lettergrade]}
										</h2>
									</td>
									<td>
										<b ng-hide="editmode" style="font-size: 16px !important;">{[grade.ptsearned * 100 / grade.ptstotal | number:2]}%</b>
										<div class="ui small input" ng-show="editmode" ng-class="{'disabled': mpGrades[search.mp-1][$index].deleted}">
											<input type="text" ng-model="mpGrades[search.mp-1][$index].ptsearned" />
										</div>
									</td>
									<td>
										<span ng-hide="editmode" style="font-size: 16px !important;">{[grade.ptsearned]} of {[grade.ptstotal]}</span>
										<div class="ui small input" ng-show="editmode" ng-class="{'disabled': mpGrades[search.mp-1][$index].deleted}">
											<input type="text" ng-model="mpGrades[search.mp-1][$index].ptstotal" />
										</div>
									</td>
									<td>
										<span ng-hide="editmode" style="font-size: 16px !important;">{[grade.category]}</span>
										<select class="ui small dropdown" ng-show="editmode" ng-model="mpGrades[search.mp-1][$index].category" ng-class="{'disabled': mpGrades[search.mp-1][$index].deleted}">
											<option ng-repeat="category in categories" value="{[category.name]}">{[category.name]}</option>
										</select>
									</td>
									<td>
										<span ng-hide="editmode" style="font-size: 16px !important;">{[grade.name]}</span>
										<div class="ui small input" ng-show="editmode" ng-class="{'disabled': mpGrades[search.mp-1][$index].deleted}">
											<input type="text" ng-model="mpGrades[search.mp-1][$index].name" />
										</div>
									</td>
									<td ng-show="editmode">
										<div class="ui inverted icon button" ng-class="{'red': !mpGrades[search.mp-1][$index].deleted, 'blue': mpGrades[search.mp-1][$index].deleted}" ng-click="toggleDeleted(search.mp-1, $index)">
											<i class="icon" ng-class="{'trash': !mpGrades[search.mp-1][$index].deleted, 'check': mpGrades[search.mp-1][$index].deleted}"></i>
										</div>
									</td>
									<td ng-show="phantommode" style="padding: 7px !important;">
										<div class="ui mini inverted pink icon button" ng-click="deleteExpGrade($index)">
											<i class="minus icon"></i>
										</div>
									</td>
								</tr>
								<tr ng-show="phantommode">
									<td colspan="7">
										<div class="six fields" style="margin: 7px 0 !important;">
											<div class="four wide field">
												<div class="ui small input" ng-class="{'disabled': mpGrades[search.mp-1][$index].deleted}">
													<input type="date" ng-model="expgrade.date" placeholder="Date" />
												</div>
											</div>
											<div class="two wide field">
												<div class="ui small input" ng-class="{'disabled': mpGrades[search.mp-1][$index].deleted}">
													<input type="text" ng-model="expgrade.ptsearned" placeholder="Pts Earned" />
												</div>
											</div>
											<div class="two wide field">
												<div class="ui small input" ng-class="{'disabled': mpGrades[search.mp-1][$index].deleted}">
													<input type="text" ng-model="expgrade.ptstotal" placeholder="Pts Total" />
												</div>
											</div>
											<div class="three wide field">
												<select class="ui small dropdown" ng-model="expgrade.category" ng-class="{'disabled': mpGrades[search.mp-1][$index].deleted}">
													<option ng-repeat="category in categories" value="{[category.name]}">{[category.name]}</option>
												</select>
											</div>
											<div class="four wide field">
												<div class="ui small input" ng-class="{'disabled': mpGrades[search.mp-1][$index].deleted}">
													<input type="text" ng-model="expgrade.name" placeholder="Name" />
												</div>
											</div>
											<div class="one wide field">
												<div class="ui pink inverted icon button" ng-click="addExpGrade()">
													<i class="plus icon"></i>
												</div>
											</div>
										</div>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
					<div class="ui secondary center aligned segment" ng-show="mpGrades[search.mp-1].length === 0">
						<h2>
							<i class="frown icon"></i>
							No grades in this marking period yet!
						</h2>
					</div>
				</div>
				<div class="tab" ng-show="tab === 2">
					<div class="ui secondary center aligned segment" ng-hide="search.category">
						<h2>
							<i class="mouse pointer icon"></i>
							Select a category to view its statistics.
						</h2>
					</div>
					<div class="ui secondary center aligned segment" ng-hide="gradeBrackets[search.mp-1][search.category].percents.length || !search.category">
						<h2>
							<i class="frown icon"></i>
							There are no grades in this category and MP!
						</h2>
					</div>
					<div ng-show="gradeBrackets[search.mp-1][search.category].percents.length && search.category">					
						<div class="ui center aligned grid" id="categoryStatsGrid">
							<div class="sixteen wide column">
								<div class="ui fluid center aligned segment" style="padding: 0.75em 0.75em !important;">
									<h3>MP{[search.mp]} {[search.category]} Statistics</h3>
								</div>
							</div>
							<div class="six wide column">
								<div class="ui segments">
									<div class="ui center aligned segment" ng-class="{'teal': !phantommode, 'pink': phantommode}">
										<h3>Category Average</h3>
									</div>
									<div class="ui segment">
										<h1>
											{[gradeBrackets[search.mp-1][search.category].averageLetter]} &nbsp;
											<span style="font-weight: normal !important;">{[gradeBrackets[search.mp-1][search.category].averagePercent | number:2]}%</span>
										</h1>
									</div>
									<div class="ui segment">
										<h2>{[gradeBrackets[search.mp-1][search.category].ptsearned]} of {[gradeBrackets[search.mp-1][search.category].ptstotal]}</h2>
									</div>
								</div>
								<div class="ui segments">
									<div class="ui center aligned segment" ng-class="{'teal': !phantommode, 'pink': phantommode}">
										<h3>Scores ({[gradeBrackets[search.mp-1][search.category].count]})</h3>
									</div>
									<div class="ui compact segment">
										<h3 ng-repeat="score in gradeBrackets[search.mp-1][search.category].percents track by $index">
											{[score / 100 | lettergrade]} &nbsp;
											<span style="font-weight: normal !important;">{[score | number:2]}%</span>
										</h3>
									</div>
								</div>
							</div>
							<div class="ten wide column">
								<div class="ui segments">
									<div class="ui center aligned segment" ng-class="{'teal': !phantommode, 'pink': phantommode}">
										<h3>Average Progression</h3>
									</div>
									<div class="ui segment">
										<canvas id="categoricalAverageProgressionChart" height="150"></canvas>
									</div>
								</div>
								<div class="ui segments">
									<div class="ui center aligned segment" ng-class="{'teal': !phantommode, 'pink': phantommode}">
										<h3>Five Number Summary</h3>
									</div>
									<div class="ui segment">
										<div class="ui five tiny statistics">
											<div class="ui statistic">
												<div class="value">{[gradeBrackets[search.mp-1][search.category].low | number:1]}</div>
												<div class="label">Min</div>
											</div>
											<div class="ui statistic">
												<div class="value">{[gradeBrackets[search.mp-1][search.category].firstqrt | number:1]}</div>
												<div class="label">Low Quart</div>
											</div>
											<div class="ui statistic">
												<div class="value">{[gradeBrackets[search.mp-1][search.category].median | number:1]}</div>
												<div class="label">Median</div>
											</div>
											<div class="ui statistic">
												<div class="value">{[gradeBrackets[search.mp-1][search.category].thirdqrt | number:1]}</div>
												<div class="label">Up Quart</div>
											</div>
											<div class="ui statistic">
												<div class="value">{[gradeBrackets[search.mp-1][search.category].high | number:1]}</div>
												<div class="label">Max</div>
											</div>
										</div>
									</div>
								</div>
								<div class="ui segments">
									<div class="ui center aligned segment" ng-class="{'teal': !phantommode, 'pink': phantommode}">
										<h3>Means & Deviations</h3>
									</div>
									<div class="ui segment">
										<div class="ui three tiny statistics">
											<div class="ui statistic">
												<div class="value">{[gradeBrackets[search.mp-1][search.category].arithmeticmean | number:1]}</div>
												<div class="label">Arithmetic Mean</div>
											</div>
											<div class="ui statistic">
												<div class="value">{[gradeBrackets[search.mp-1][search.category].geometricmean | number:1]}</div>
												<div class="label">Geometric Mean</div>
											</div>
											<div class="ui statistic">
												<div class="value">{[gradeBrackets[search.mp-1][search.category].harmonicmean | number:1]}</div>
												<div class="label">Harmonic Mean</div>
											</div>
											<div class="ui statistic">
												<div class="value">{[gradeBrackets[search.mp-1][search.category].stdvar | number:1]}</div>
												<div class="label">Standard Variance</div>
											</div>
											<div class="ui statistic">
												<div class="value">{[gradeBrackets[search.mp-1][search.category].stddev | number:1]}</div>
												<div class="label">Standard Deviation</div>
											</div>
											<div class="ui statistic">
												<div class="value">{[gradeBrackets[search.mp-1][search.category].meandev | number:1]}</div>
												<div class="label">Mean Deviation</div>
											</div>
										</div>
									</div>
								</div>
								<!--<div class="ui segments">
									<div class="ui center aligned segment" ng-class="{'teal': !phantommode, 'pink': phantommode}">
										<h3>Outliers</h3>
									</div>
									<div class="ui segment">
										<div class="ui two tiny statistics">
											<div class="ui statistic">
												<div class="value">–∞ → {[gradeBrackets[search.mp-1][search.category].lofence | number:1]}</div>
												<div class="label">Extreme Lower Outliers</div>
											</div>
											<div class="ui statistic">
												<div class="value">{[gradeBrackets[search.mp-1][search.category].lofence | number:1]} → {[gradeBrackets[search.mp-1][search.category].lifence | number:1]}</div>
												<div class="label">Mild Lower Outliers</div>
											</div>
											<div class="ui statistic">
												<div class="value">{[gradeBrackets[search.mp-1][search.category].uifence | number:1]} → {[gradeBrackets[search.mp-1][search.category].uofence | number:1]}</div>
												<div class="label">Mild Upper Outliers</div>
											</div>
											<div class="ui statistic">
												<div class="value">{[gradeBrackets[search.mp-1][search.category].uofence | number:1]} → ∞</div>
												<div class="label">Extreme Upper Outliers</div>
											</div>
										</div>
									</div>
								</div>-->
							</div>
						</div>
					</div>
				</div>
				<div class="tab" ng-show="tab === 3">
					<div class="ui stackable grid">
						<div class="sixteen wide column">
							<div class="ui segment" ng-hide="mpGrades[search.mp-1].length === 0">
								<canvas id="averageProgressionChart" height="150"></canvas>
							</div>
						</div>
						<div class="eight wide column">
							<div class="ui segment">
								<canvas id="frequencyChart" height="150"></canvas>
							</div>
						</div>
						<div class="eight wide column"> 
							<div class="ui segment">
								<canvas id="cumulativeFrequencyChart" height="150"></canvas>
							</div>
						</div>
					</div>
					<div class="ui secondary center aligned segment" ng-show="mpGrades[search.mp-1].length === 0">
						<h2>
							<i class="frown icon"></i>
							No grades in this marking period yet!
						</h2>
					</div>
				</div>
				<div class="tab" ng-show="tab === 4">
					<table class="ui center aligned table" id="averageStatsTable">
						<thead>
							<th>Category</th>
							<th ng-show="class.mp1">MP1</th>
							<th ng-show="class.mp2">MP2</th>
							<th ng-show="class.mp3">MP3</th>
							<th ng-show="class.mp4">MP4</th>
						</thead>
						<tbody>
							<tr ng-repeat="category in categories">
								<td class="categorycell">{[category.name]}</td>
								<td ng-show="class.mp1">{[gradeBrackets[0][category.name].averageLetter | valueordefault]} &nbsp; {[gradeBrackets[0][category.name].averagePercent | number:2]}<span ng-show="gradeBrackets[0][category.name].averagePercent !== null">%</span></td>
								<td ng-show="class.mp2">{[gradeBrackets[1][category.name].averageLetter | valueordefault]} &nbsp; {[gradeBrackets[1][category.name].averagePercent | number:2]}<span ng-show="gradeBrackets[1][category.name].averagePercent !== null">%</span></td>
								<td ng-show="class.mp3">{[gradeBrackets[2][category.name].averageLetter | valueordefault]} &nbsp; {[gradeBrackets[2][category.name].averagePercent | number:2]}<span ng-show="gradeBrackets[2][category.name].averagePercent !== null">%</span></td>
								<td ng-show="class.mp4">{[gradeBrackets[3][category.name].averageLetter | valueordefault]} &nbsp; {[gradeBrackets[3][category.name].averagePercent | number:2]}<span ng-show="gradeBrackets[3][category.name].averagePercent !== null">%</span></td>
							</tr>
							<tr style="background-color: #F9FAFB;">
								<td class="categorycell">Total</td>
								<td ng-show="class.mp1">{[mpAverages[0].averageLetter | valueordefault]} &nbsp; {[mpAverages[0].averagePercent | number:2]}<span ng-show="mpAverages[0].averagePercent !== null">%</span></td>
								<td ng-show="class.mp2">{[mpAverages[1].averageLetter | valueordefault]} &nbsp; {[mpAverages[1].averagePercent | number:2]}<span ng-show="mpAverages[1].averagePercent !== null">%</span></td>
								<td ng-show="class.mp3">{[mpAverages[2].averageLetter | valueordefault]} &nbsp; {[mpAverages[2].averagePercent | number:2]}<span ng-show="mpAverages[2].averagePercent !== null">%</span></td>
								<td ng-show="class.mp4">{[mpAverages[3].averageLetter | valueordefault]} &nbsp; {[mpAverages[3].averagePercent | number:2]}<span ng-show="mpAverages[3].averagePercent !== null">%</span></td>
							</tr>
						</tbody>
					</table>
					<div class="ui center aligned five column grid">
						<div class="column" ng-repeat="mp in [0,1,2,3]">
							<div class="ui segment" ng-class="{'inverted grey': !class['mp' + (mp + 1)]}">
								<div class="ui statistic" ng-class="{'teal': !phantommode && class['mp' + (mp + 1)], 'pink': phantommode && class['mp' + (mp + 1)], 'inverted': !class['mp' + (mp + 1)]}">
				 		 			<div class="value">{[mpAverages[mp].averageLetter | valueordefault]}</div>
				 		 			<div class="label">MP{[mp+1]} AVERAGE</div>
								</div>
							</div>
						</div>
						<div class="column">
							<div class="ui inverted segment" ng-class="{'teal': !phantommode, 'pink': phantommode}">
								<div class="ui inverted statistic">
				 		 			<div class="value">{[yearAverageLetter | valueordefault]}</div>
				 		 			<div class="label">FINAL AVERAGE</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="tab" ng-show="tab === 5">
					<div class="ui top attached secondary pointing large menu">
						<a class="item" ng-class="{'active': changesTab === 3, 'teal': !phantommode, 'pink': phantommode}" ng-click="changeChangesTab(3)">
							Trends
						</a>
						<a class="item" ng-class="{'active': changesTab === 2, 'teal': !phantommode, 'pink': phantommode}" ng-click="changeChangesTab(2)">
							All Changes
						</a>
						<a class="item" ng-class="{'active': changesTab === 1, 'teal': !phantommode, 'pink': phantommode}" ng-click="changeChangesTab(1)">
							Greatest Changes
						</a>
					</div>
					<div class="ui bottom attached segment" ng-class="{'secondary': mpGrades[search.mp-1].length < 4}">
						<div ng-show="changesTab === 1 && mpGrades[search.mp-1].length >= 4">
							<table class="ui center aligned celled compact definition table">
								<thead>
									<th></th>
									<th>Greatest Rise</th>
									<th>Greatest Uptrend</th>
									<th>Greatest Drop</th>
									<th>Greatest Downtrend</th>
								</thead>
								<tbody>
									<tr>
										<th>Change</th>
										<td class="tealText"><i class="angle up icon"></i> {[insights[search.mp - 1].biggestRise | number: 2]}%</td>
										<td class="tealText"><i class="angle double up icon"></i> {[insights[search.mp - 1].biggestUptrend | number: 2]}%</td>
										<td class="redText"><i class="angle down icon"></i> {[insights[search.mp - 1].biggestDrop | number: 2]}%</td>
										<td class="redText"><i class="angle double down icon"></i> {[insights[search.mp - 1].biggestDowntrend | number: 2]}%</td>
									</tr>
									<tr>
										<th>Start Date</th>
										<td>{[insights[search.mp - 1].biggestRiseStartDate | date:'MMM d, yyyy']}</td>
										<td>{[insights[search.mp - 1].biggestUptrendStartDate | date:'MMM d, yyyy']}</td>
										<td>{[insights[search.mp - 1].biggestDropStartDate | date:'MMM d, yyyy']}</td>
										<td>{[insights[search.mp - 1].biggestDowntrendStartDate | date:'MMM d, yyyy']}</td>
									</tr>
									<tr>
										<th>End Date</th>
										<td>{[insights[search.mp - 1].biggestRiseEndDate | date:'MMM d, yyyy']}</td>
										<td>{[insights[search.mp - 1].biggestUptrendEndDate | date:'MMM d, yyyy']}</td>
										<td>{[insights[search.mp - 1].biggestDropEndDate | date:'MMM d, yyyy']}</td>
										<td>{[insights[search.mp - 1].biggestDowntrendEndDate | date:'MMM d, yyyy']}</td>
									</tr>
								</tbody>
							</table>
						</div>
						<div ng-show="changesTab === 2 && mpGrades[search.mp-1].length >= 4">
							<table class="ui center aligned celled compact table">
								<thead>
									<th>Days</th>
									<th>Start Date</th>
									<th>End Date</th>
									<th>Type</th>
									<th>Change</th>
								</thead>
								<tbody>
									<tr ng-repeat="change in averageChanges[search.mp-1]">
										<td>{[change.days | number: 0]}</td>
										<td>{[change.startDate | date: 'MMM d, yyyy']}</td>
										<td>{[change.endDate | date: 'MMM d, yyyy']}</td>
										<td>{[change.change | changetype]}</td>
										<td ng-class="{'redText': change.change < 0, 'tealText': change.change > 0}"><i class="icon" ng-class="{'down angle': change.change < 0, 'up angle': change.change > 0, 'right angle': change.change === 0}"></i> {[change.change | number: 2]}%</td>
									</tr>
								</tbody>
							</table>
						</div>
						<div ng-show="changesTab === 3 && mpGrades[search.mp-1].length >= 3">
							<table class="ui center aligned celled compact table">
								<thead>
									<th>Days</th>
									<th>Start Date</th>
									<th>End Date</th>
									<th>Trend</th>
									<th>Net Change</th>
								</thead>
								<tbody>
									<tr ng-repeat="trend in averageTrends[search.mp-1]">
										<td>{[trend.days | number: 0]}</td>
										<td>{[trend.startDate | date: 'MMM d, yyyy']}</td>
										<td>{[trend.endDate | date: 'MMM d, yyyy']}</td>
										<td>{[trend.net | trendtype]}</td>
										<td ng-class="{'redText': trend.net < 0, 'tealText': trend.net > 0}"><i class="icon" ng-class="{'double down angle': trend.net < 0, 'double up angle': trend.net > 0, 'double right angle': trend.net === 0}"></i> {[trend.net | number: 2]}%</td>
									</tr>
								</tbody>
							</table>
						</div>
						<div ng-show="mpGrades[search.mp-1].length < 4" style="width: 100%; text-align: center;">
							<h3><i class="frown icon"></i> Not enough grades in this MP to view these insights!</h3>
						</div>
					</div>
				</div>
				<div class="tab" ng-show="tab === 6">
					<div class="ui segments">
						<div class="ui segment">
							<h3 style="font-family: Oswald !important;">Year Average Calculator</h3>
						</div>
						<div class="ui segment">
							<div class="ui five statistics">
								<div class="ui statistic" ng-style="{'visibility': class.mp1 ? 'visible': 'hidden'}">
									<div class="value avg1">{[expavgs.mp1 | numequivtoletter]}</div>
									<div class="label">
										<div class="ui inline dropdown averageDropdown" id="avg1Dropdown">
								      		<div class="text">MP1</div>
								      		<i class="dropdown icon"></i>
								      		<div class="menu">
									     		<div class="item" data-text="MP1" ng-click="setExpValue('110')">A+</div>
								     	  		<div class="item" data-text="MP1" ng-click="setExpValue('19')">A</div>
									        	<div class="item" data-text="MP1" ng-click="setExpValue('18')">A-</div>
									        	<div class="item" data-text="MP1" ng-click="setExpValue('17')">B+</div>
								     	  		<div class="item" data-text="MP1" ng-click="setExpValue('16')">B</div>
									        	<div class="item" data-text="MP1" ng-click="setExpValue('15')">B-</div>
									        	<div class="item" data-text="MP1" ng-click="setExpValue('14')">C+</div>
								     	  		<div class="item" data-text="MP1" ng-click="setExpValue('13')">C</div>
									        	<div class="item" data-text="MP1" ng-click="setExpValue('12')">C-</div>
									        	<div class="item" data-text="MP1" ng-click="setExpValue('11')">D</div>
									        	<div class="item" data-text="MP1" ng-click="setExpValue('10')">F</div>
								      		</div>
									    </div>
									</div>
								</div>
								<div class="ui statistic" ng-style="{'visibility': class.mp2 ? 'visible': 'hidden'}">
									<div class="value avg2">{[expavgs.mp2 | numequivtoletter]}</div>
									<div class="label">
										<div class="ui inline dropdown averageDropdown" id="avg2Dropdown">
								      		<div class="text">MP2</div>
								      		<i class="dropdown icon"></i>
								      		<div class="menu">
									     		<div class="item" data-text="MP2" ng-click="setExpValue('210')">A+</div>
								     	  		<div class="item" data-text="MP2" ng-click="setExpValue('29')">A</div>
									        	<div class="item" data-text="MP2" ng-click="setExpValue('28')">A-</div>
									        	<div class="item" data-text="MP2" ng-click="setExpValue('27')">B+</div>
								     	  		<div class="item" data-text="MP2" ng-click="setExpValue('26')">B</div>
									        	<div class="item" data-text="MP2" ng-click="setExpValue('25')">B-</div>
									        	<div class="item" data-text="MP2" ng-click="setExpValue('24')">C+</div>
								     	  		<div class="item" data-text="MP2" ng-click="setExpValue('23')">C</div>
									        	<div class="item" data-text="MP2" ng-click="setExpValue('22')">C-</div>
									        	<div class="item" data-text="MP2" ng-click="setExpValue('21')">D</div>
									        	<div class="item" data-text="MP1" ng-click="setExpValue('20')">F</div>
								      		</div>
									    </div>
									</div>
								</div>
								<div class="ui statistic" ng-style="{'visibility': class.mp3 ? 'visible': 'hidden'}">
									<div class="value avg3">{[expavgs.mp3 | numequivtoletter]}</div>
									<div class="label">
										<div class="ui inline dropdown averageDropdown" id="avg3Dropdown">
								      		<div class="text">MP3</div>
								      		<i class="dropdown icon"></i>
								      		<div class="menu">
									     		<div class="item" data-text="MP3" ng-click="setExpValue('310')">A+</div>
								     	  		<div class="item" data-text="MP3" ng-click="setExpValue('39')">A</div>
									        	<div class="item" data-text="MP3" ng-click="setExpValue('38')">A-</div>
									        	<div class="item" data-text="MP3" ng-click="setExpValue('37')">B+</div>
								     	  		<div class="item" data-text="MP3" ng-click="setExpValue('36')">B</div>
									        	<div class="item" data-text="MP3" ng-click="setExpValue('35')">B-</div>
									        	<div class="item" data-text="MP3" ng-click="setExpValue('34')">C+</div>
								     	  		<div class="item" data-text="MP3" ng-click="setExpValue('33')">C</div>
									        	<div class="item" data-text="MP3" ng-click="setExpValue('32')">C-</div>
									        	<div class="item" data-text="MP3" ng-click="setExpValue('31')">D</div>
									        	<div class="item" data-text="MP3" ng-click="setExpValue('30')">F</div>
								      		</div>
									    </div>
									</div>
								</div>
								<div class="ui statistic" ng-style="{'visibility': class.mp4 ? 'visible': 'hidden'}">
									<div class="value avg4">{[expavgs.mp4 | numequivtoletter]}</div>
									<div class="label">
										<div class="ui inline dropdown averageDropdown" id="avg4Dropdown">
								      		<div class="text">MP4</div>
								      		<i class="dropdown icon"></i>
								      		<div class="menu">
									     		<div class="item" data-text="MP4" ng-click="setExpValue('410')">A+</div>
								     	  		<div class="item" data-text="MP4" ng-click="setExpValue('49')">A</div>
									        	<div class="item" data-text="MP4" ng-click="setExpValue('48')">A-</div>
									        	<div class="item" data-text="MP4" ng-click="setExpValue('47')">B+</div>
								     	  		<div class="item" data-text="MP4" ng-click="setExpValue('46')">B</div>
									        	<div class="item" data-text="MP4" ng-click="setExpValue('45')">B-</div>
									        	<div class="item" data-text="MP4" ng-click="setExpValue('44')">C+</div>
								     	  		<div class="item" data-text="MP4" ng-click="setExpValue('43')">C</div>
									        	<div class="item" data-text="MP4" ng-click="setExpValue('42')">C-</div>
									        	<div class="item" data-text="MP4" ng-click="setExpValue('41')">D</div>
									        	<div class="item" data-text="MP4" ng-click="setExpValue('40')">F</div>
								      		</div>
									    </div>
									</div>
								</div>
								<div class="ui statistic" ng-class="{'teal': !phantommode, 'pink': phantommode}">
									<div class="value avgF">{[expavgs.final | numequivtoletter]}</div>
									<div class="label">Final</div>
								</div>
							</div>
						</div>
					</div>
					<div class="ui segments">
						<div class="ui segment">
							<h3 style="font-family: Oswald !important;">MP Average Calculator</h3>
						</div>
						<div class="ui segment">
							<table style="width: 100% !important;">
								<tr>
									<td style="width: 75% !important;" id="mpAverageCalculator">
										<div ng-repeat="category in mpaveragecalccategories" style="width: 100% !important; display: block;">
											<div style="padding: 5px 0; text-align: center; width: 100%; font-family: Oswald !important;">{[category.category]}</div>
											<table>
												<tr>
													<td class="secCell">{[category.average-2]}</td>
													<td class="secCell">{[category.average-1]}</td>
													<td class="primCell">{[category.average]}</td>
													<td class="secCell">{[category.average+1]}</td>
													<td class="secCell">{[category.average+2]}</td>
													<td class="actionCell" ng-click="incMPCalcAverage($index)"><i class="plus icon"></i></td>
													<td class="actionCell" ng-click="decMPCalcAverage($index)"><i class="minus icon"></i></td>
												</tr>
											</table>
										</div>
									</td>
									<td style="width: 25% !important; text-align: center;">
										<b style="font-size: 36px !important;">{[mpaveragecalcavg | number:2]}%<br><br></b>
										<b style="font-size: 28px !important;">{[mpaveragecalcavg / 100 | lettergrade]}</b>
									</td>
								</tr>
							</table>
						</div>
					</div>
					<!--<div class="ui segment" style="padding: 0 !important; background: url(/images/achieveyourgoal.jpg) 50% 50% no-repeat; background-size: cover;">
						<div style="background: rgba(255,255,255,0.8) !important; padding: 15px; width: 100%; position: relative; bottom: 2px;">
							<table style="width: 100%;">
								<tr>
									<td>
										<h3 style="font-family: 'Oswald' !important;"><i class="soccer icon"></i> Achieve Your Goal <span style="font-size: 14px !important; display: inline-block; position: relative; left: 3px; font-family: 'Oswald' !important;">BETA</span></h3>
									</td>
									<td ng-show="lowestPossibleAverage" style="text-align: right;">
										<h3><i class="left arrow icon" ng-click="decAchieveGoalPage()" ng-hide="achievegoalpage === 0"></i> Page {[achievegoalpage]} of 4 <i class="right arrow icon" ng-click="incAchieveGoalPage()" ng-style="{'visibility': achievegoalpage === 4 ? 'hidden': 'visible'}"></i></h3>
									</td>
								</tr>
							</table>
						</div>
						<div style="width: 100% !important; padding: 60px; text-align: center;">
							<div style="width: 80% !important; display: inline-block; background: rgba(255,255,255,0.8) !important; padding: 20px; font-size: 18px;">
								<div ng-show="achievegoalpage === 0">
									<div ng-show="lowestPossibleAverage">
										Determine what scores you need going forward to achieve a <b>{[class.goalaverage | numequivtoletter]}</b>!
										<br><br>
										<div class="ui black labeled icon button" style="background: rgba(0,0,0,0.6) !important;" ng-click="incAchieveGoalPage()">
											<i class="right arrow icon"></i>
											Get Started
										</div>
									</div>
									<div ng-hide="lowestPossibleAverage">
										<p style="font-size: 16px;">Based on your current scores, it seems like a final average of <b>{[class.goalaverage | numequivtoletter]}</b> is no longer possible. Please lower your goal average to interact with this module:</p>
										<select style="text-align: center; width: 80px; padding: 5px;" ng-model="newgoalavg">
											<option value="10">A+</option>
											<option value="9">A</option>
											<option value="8">A-</option>
											<option value="7">B+</option>
											<option value="6">B</option>
											<option value="5">B-</option>
											<option value="4">C+</option>
											<option value="3">C</option>
											<option value="2">C-</option>
											<option value="1">D</option>
											<option value="0">F</option>
										</select>
										<div class="ui teal button" style="padding: 12px 20px !important; position: relative; left: 10px; bottom: 2px;" ng-click="changeGoalAverage()">
											Change
										</div>
									</div>
								</div>
								<div ng-show="achievegoalpage === 1">
									<p style="font-size: 16px;">Please select the relative difficulty of assignments in each category.</p>
									<table style="width: 100%;">
										<tr ng-repeat="stat in achievegoalstats">
											<td style="width: 50%; text-align: right !important; font-weight: bold;">{[stat.category]}</td>
											<td style="width: 50%; padding-left: 20px;">
												<select ng-model="stat.difficulty" style="width: 100%; padding: 5px; font-size: 14px;">
													<option value="5">Very Easy</option>
													<option value="4">Easy</option>
													<option value="3">Medium</option>
													<option value="2">Hard</option>
													<option value="1">Very Hard</option>
													<option value="0">Impossible</option>
												</select>
											</td>
										</tr>
									</table>
								</div>
								<div ng-show="achievegoalpage === 2">
									<p style="font-size: 16px;">Please select how many more assignments in each category will be given for the rest of MP{[currentmp]} in the right column. The left column shows how many assignments are already in each category.</p>
									<table style="width: 100%;">
										<tr ng-repeat="stat in achievegoalstats">
											<td style="width: 50%; text-align: right !important; font-weight: bold;">{[stat.category]}</td>
											<td style="width: 25%; padding-left: 20px;">
												<input type="number" ng-model="gradeBrackets[currentmp-1][stat.category].count" style="width: 100% !important; padding: 5px; font-size: 14px;" disabled="disabled" />
											</td>
											<td style="width: 25%; padding-left: 20px;">
												<input type="number" min="0" step="1" ng-model="stat.asgnleft" style="width: 100% !important; padding: 5px; font-size: 14px;" />
											</td>
										</tr>
									</table>
								</div>
								<div ng-show="achievegoalpage === 3">
									<p style="font-size: 16px;">The lowest average you can earn MP{[currentmp]} to end with a <b>{[class.goalaverage | numequivtoletter]}</b> is a <b>{[lowestPossibleAverage | numequivtoletter]}</b>. What average do you want this MP? Note: <i> The higher the average you attain, the easier it will be to achieve your goal later on.</i></p>
									<select style="text-align: center; width: 80px; padding: 5px;" ng-model="achievegoalavg">
										<option value="10" ng-show="lowestPossibleAverage <= 10">A+</option>
										<option value="9" ng-show="lowestPossibleAverage <= 9">A</option>
										<option value="8" ng-show="lowestPossibleAverage <= 8">A-</option>
										<option value="7" ng-show="lowestPossibleAverage <= 7">B+</option>
										<option value="6" ng-show="lowestPossibleAverage <= 6">B</option>
										<option value="5" ng-show="lowestPossibleAverage <= 5">B-</option>
										<option value="4" ng-show="lowestPossibleAverage <= 4">C+</option>
										<option value="3" ng-show="lowestPossibleAverage <= 3">C</option>
										<option value="2" ng-show="lowestPossibleAverage <= 2">C-</option>
										<option value="1" ng-show="lowestPossibleAverage <= 1">D</option>
										<option value="0" ng-show="lowestPossibleAverage <= 0">F</option>
									</select>
								</div>
								<div ng-show="achievegoalpage === 4">
									<p style="font-size: 16px;">There are infinite ways to move your average up, but based on the difficulties you set, you should aim to get these scores for the next assignments in each category.</p>
									<span ng-repeat="nextscore in nextscores" style="font-size: 20px !important; line-height: 30px !important;">
										<b>{[nextscore.category]}</b>: <span>{[nextscore.nextscores]}%</span>
										<br />
									</span>
								</div>
							</div>
						</div>
					</div>-->
				</div>
			</div>
		</div>
		<div class="four wide center aligned column">
			<div class="ui large fluid labeled icon button" id="addGradeButton" ng-class="{'teal': !phantommode, 'disabled pink': phantommode}">
				<i class="table icon"></i>
				Add Grades
			</div>
			<br>
			<select class="ui fluid dropdown" id="mpSelectionDropdown" ng-model="search.mp">
				<option value="1">MP1</option>
				<option value="2">MP2</option>
				<option value="3">MP3</option>
				<option value="4">MP4</option>
				<!--<option value="5">Year</option>-->
			</select>
			<div ng-show="tab === 2">
				<br>
				<select class="ui fluid dropdown" id="categorySelectionDropdown" ng-model="search.category">
					<option ng-repeat="category in categories" value="{[category.name]}">{[category.name]}</option>
				</select>
			</div>
			<div class="ui segments">
				<div class="ui segment" ng-class="{'teal': !phantommode, 'pink': phantommode}">
					<h3>Grade Categories</h3>
				</div>
				<div class="ui segment" ng-repeat="category in categories">
					<b>{[category.name]} </b>
					<span> {[category.weight]}%</span>
				</div>
			</div>
			<div class="ui segments">
				<div class="ui secondary segment">
					<h3>{[class.credits | number:2]} Credits</h3>
				</div>
				<div class="ui secondary segment">
					<h3>{[class.type | type]} Course</h3>
				</div>
				<div class="ui secondary segment">
					<h3>Taken in Grade {[class.grade]}</h3>
				</div>
			</div>
			<table class="ui center aligned celled table">
				<thead>
					<tr>
						<th>MP1</th>
						<th>MP2</th>
						<th>MP3</th>
						<th>MP4</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td><i class="large {[class.mp1 | check]} icon"></i></td>
						<td><i class="large {[class.mp2 | check]} icon"></i></td>
						<td><i class="large {[class.mp3 | check]} icon"></i></td>
						<td><i class="large {[class.mp4 | check]} icon"></i></td>
					</tr>
				</tbody>
			</table>
			<div class="ui large fluid inverted blue button" id="editClassButton">
				Edit Class
			</div>
			<br />
			<div class="ui large fluid inverted red button" id="deleteClassButton">
				Delete Class
			</div>
		</div>
	</div>
	<div class="ui fullscreen modal" id="addGradeModal">
		<div class="header">Add Grades</div>
		<div class="ui scrolling form content">
			<div class="fields" ng-repeat="newgrade in newgrades">
				<div class="two wide field" id="AGMdate{[$index]}">
					<label ng-show="$index === 0">Date</label>
					<input type="date" placeholder="Date" ng-model="newgrade.date">
				</div>
				<div class="two wide field" id="AGMcategory{[$index]}">
					<label ng-show="$index === 0">Category</label>
					<select class="ui fluid noninit dropdown addGradeCategoryDropdown" ng-model="newgrade.category">
						<option ng-repeat="category in categories" value="{[category.name]}">{[category.name]}</option>
					</select>
				</div>
				<div class="five wide field" id="AGMname{[$index]}">
					<label ng-show="$index === 0">Assignment Name</label>
					<input type="text" placeholder="Assignment Name" ng-model="newgrade.name">
				</div>
				<div class="two wide field" id="AGMmp{[$index]}">
					<label ng-show="$index === 0">Marking Period</label>
					<select class="ui fluid noninit dropdown addGradeMPDropdown" ng-model="newgrade.mp">
						<option value="1">MP1</option>
						<option value="2">MP2</option>
						<option value="3">MP3</option>
						<option value="4">MP4</option>
					</select>
				</div>
				<div class="two wide field" id="AGMptsearned{[$index]}">
					<label ng-show="$index === 0">Points Earned</label>
					<input type="number" placeholder="Points Earned" ng-model="newgrade.ptsearned" min="0">
				</div>
				<div class="two wide field" id="AGMptstotal{[$index]}">
					<label ng-show="$index === 0">Points Total</label>
					<input type="number" placeholder="Points Total" ng-model="newgrade.ptstotal" min="0">
				</div>
				<div class="one wide field">
					<label ng-show="$index === 0" style="visibility: hidden;">Delete</label>
					<div class="ui fluid red inverted icon button" ng-class="{'disabled': newgrades.length === 1}" ng-click="deleteNewGrade($index)"><i class="trash icon"></i></div>
				</div>
			</div>
		</div>
		<div class="actions">
			<div class="ui black button" ng-click="createRow()">Create Row</div>
			<div class="ui teal labeled icon button" ng-click="addGrades()">
		    	<i class="plus icon"></i>
		    	Add Grades
		    </div>
			<div class="ui red deny button">Cancel</div>
		</div>
	</div>
	<div class="ui basic modal" id="deleteClassModal">
		<div class="ui icon header">
        	<i class="trash icon"></i>
    		Delete Class
        </div>
		<div class="content">
			<p>Are you really sure you want to delete this class? All associated grades, categories, averages, and data will be deleted as well! You cannot undo this action, so create a backup file (Export) if you may need this class in the future!</p>
		</div>
		<div class="actions">
			<div class="ui basic cancel inverted button">
            	<i class="x icon"></i>
        		Cancel
        	</div>
        	<div class="ui red ok inverted button" ng-click="deleteClass()">
           		<i class="trash icon"></i>
            	Delete
        	</div>
		</div>
	</div>
	<div class="ui small modal" id="editModal">
		<div class="header">
			Edit Class
		</div>
		<div class="ui scrolling form content">
			<div class="two fields">
				<div class="field">
					<label>Name</label>
					<input type="text" placeholder="Name" id="editclassname" ng-model="edit.name" />
				</div>
				<div class="field">
					<label>Credits</label>
					<input type="number" placeholder="Credits" id="editclasscredits" ng-model="edit.credits" />
				</div>
			</div>
			<div class="two fields">
				<div class="field">
					<label>Type</label>
					<select id="editclasstype" ng-model="edit.type">
						<option value="2">Level 2</option>
						<option value="1">Level 1</option>
						<option value="0">Honors</option>
					</select>
				</div>
				<div class="field">
					<label>Grade</label>
					<select id="editclassgrade" ng-model="edit.grade">
						<option value="12">Grade 12</option>
						<option value="11">Grade 11</option>
						<option value="10">Grade 10</option>
						<option value="9">Grade 9</option>
					</select>
				</div>
			</div>
		</div>
		<div class="actions">
			<div class="ui teal labeled icon button" ng-click="editClass()">
		    	<i class="pencil icon"></i>
		    	Edit
		    </div>
			<div class="ui red deny button">Cancel</div>
		</div>
	</div>
</div>